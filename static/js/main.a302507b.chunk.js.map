{"version":3,"sources":["preloader/Preloader.module.css","imgs/preloader.svg","preloader/Preloader.jsx","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Preloader","props","className","classes","loader","src","preloader","firebase","apps","length","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","firestore","img","storage","ref","child","Nickname","useState","nickname","setNickname","nickRef","collection","query","orderBy","nicknameErr","setNicknameError","useCollectionData","idField","nicknames","sendNickname","e","a","preventDefault","uid","currentUser","add","user","updateProfile","displayName","setUpdate","onSubmit","type","placeholder","value","onChange","target","some","u","disabled","SignIn","signInWithEmail","setSignInWithEmail","SignInPopUp","showPass","setShowPass","login","setLogin","password","setPassword","errorLog","setErrorLog","showError","error","onClick","SignInWithEmailPop","createUserWithEmailAndPassword","catch","function","errorCode","code","errorMessage","message","signInWithEmailAndPassword","provider","GoogleAuthProvider","signInWithPopup","then","result","signInAnonymously","SignOut","signOut","ChatMessage","text","photoURL","name","messageStyle","ChatRoom","scroll","useRef","unknown","setUnknown","getDownloadURL","url","messageRef","limit","messages","formValue","setFormValue","update","sendMessage","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","undefined","map","msg","id","App","useAuthState","loading","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a302507b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Preloader_loader__37WlW\"};","export default __webpack_public_path__ + \"static/media/preloader.967465df.svg\";","import React from 'react';\r\nimport classes from './Preloader.module.css';\r\nimport preloader from '../imgs/preloader.svg';\r\n\r\nconst Preloader = (props) => {\r\n    return(\r\n    <div className={classes.loader}>\r\n        <img src={preloader}/>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Preloader","import React, { useState, useRef, useEffect } from 'react';\nimport './App.css';\nimport Preloader from './preloader/Preloader';\n\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport 'firebase/storage';\n\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\n\n\n//initilalize firebase\nif (!firebase.apps.length) {\n  firebase.initializeApp({\n    apiKey: \"AIzaSyCTFiYhbsWddczgofjfgEgP-i7viAOUgxQ\",\n    authDomain: \"simplechat-5073a.firebaseapp.com\",\n    databaseURL: \"https://simplechat-5073a-default-rtdb.firebaseio.com\",\n    projectId: \"simplechat-5073a\",\n    storageBucket: \"simplechat-5073a.appspot.com\",\n    messagingSenderId: \"1032940693503\",\n    appId: \"1:1032940693503:web:35e1f6d9fecbd8ab12e9ca\"\n  });\n} else {\n  firebase.app(); // if already initialized, use that one\n}\n\n\n//creat auth and base\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\n\n//creat storage\nconst storageRef = firebase.storage().ref();\nconst img = storageRef.child('img');\n\nfunction Nickname(props) {\n  const [nickname, setNickname] = useState('');\n  const nickRef = firestore.collection('users');\n  const query = nickRef.orderBy('nickname');\n  const [nicknameErr, setNicknameError] = useState(false);\n\n  const [nicknames] = useCollectionData(query, { idField: 'id' });\n\n  const checkNickName = (e) => {\n    setNickname(e.target.value);\n    setNicknameError(false)\n    if (nicknames.some(u => u.nickname === e.target.value)) setNicknameError(true);\n  }\n  const sendNickname = async (e,props) => {\n    e.preventDefault();\n    const { uid } = auth.currentUser;\n    if (!nicknameErr) await nickRef.add({\n      nickname,\n      uid\n    });\n    props.user.updateProfile({\n      displayName: nickname,\n    });\n    props.setUpdate(false);\n  }\n\n  return (\n    <div className=\"fade\">\n      <form className='nickForm' onSubmit={(e)=> sendNickname(e,props) }>\n        Please, input your nickname\n      <div className=\"nickname\">\n          <input type=\"text\" placeholder=\"nickname\" value={nickname} onChange={checkNickName} />\n        </div>\n        <p className=\"errNick\">{nicknameErr ? 'Name is already taken' : null}</p>\n        <button className=\"submit\" disabled={nicknameErr}>Submit</button>\n      </form>\n    </div>\n  )\n}\n\nfunction SignIn(props) {\n\n  let [signInWithEmail, setSignInWithEmail] = useState(false);\n\n  const SignInPopUp = (props) => {\n    let [showPass, setShowPass] = useState(false);\n    const [login, setLogin] = useState('');\n    const [password, setPassword] = useState('');\n    const [errorLog, setErrorLog] = useState('');\n\n\n    const toggleShow = () => {\n      showPass = !showPass;\n      setShowPass(showPass);\n    }\n\n    const showError = (error) => {\n      setErrorLog(error);\n    }\n    const sendForm = (e) => {\n      e.preventDefault();\n\n      firebase.auth().createUserWithEmailAndPassword(login, password).catch({\n        function(error) {\n          let errorCode = error.code;\n          let errorMessage = error.message;\n          if (errorCode === 'auth/weak-password') {\n            showError('The password is too weak')\n          } else {\n            showError(errorMessage)\n          }\n        }\n      })\n\n      firebase.auth().signInWithEmailAndPassword(login, password)\n        .catch((error) => {\n          let errorMessage = error.message;\n          showError(errorMessage)\n        });\n    }\n\n    return (\n      <div className=\"fade\">\n        <div className=\"close\" onClick={props.SignInWithEmailPop}>✖</div>\n        <form onSubmit={sendForm} className=\"formLog\">\n          <input className=\"login\" type=\"text\" placeholder=\"E-mail\" value={login} onChange={(e) => setLogin(e.target.value)} />\n          <div className=\"passRow\">\n            <input type={!showPass ? \"password\" : \"text\"} placeholder=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} />\n            <button onClick={toggleShow}>{!showPass ? '👁️' : ' ➖ '}</button>\n          </div>\n          <div className=\"error\">\n            <p>{errorLog}</p>\n            <button className=\"submit\">Submit</button>\n          </div>\n        </form>\n      </div>\n    )\n  }\n\n  //SignIn with Email\n  const SignInWithEmailPop = () => {\n    signInWithEmail = !signInWithEmail;\n    setSignInWithEmail(signInWithEmail);\n  }\n\n  //SignIn with Google\n  const SignInWithGoogle = (props) => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.signInWithPopup(provider).then(function (result) {\n      let user = result.user.displayName;\n    });\n  }\n  //SignIn like anonim\n  const SignInLikeAnonim = () => {\n    firebase.auth().signInAnonymously()\n  }\n\n  return (\n    <section className='signInRow'>\n      {signInWithEmail ? <SignInPopUp SignInWithEmailPop={SignInWithEmailPop} /> : null}\n      <button className='email' onClick={SignInWithEmailPop}>Sign up with e-mail</button>\n      <button className='email' onClick={SignInWithEmailPop}>Sign in with e-mail</button>\n      <button className='google' onClick={SignInWithGoogle}>Sign in with Google</button>\n      <button className='anon' onClick={SignInLikeAnonim}>Sign like anonim(with restriction)</button>\n    </section>\n  )\n}\n\nfunction SignOut(props) {\n  return auth.currentUser && (\n    <button className=\"signOut\" onClick={() => {\n      auth.signOut()\n    }}>Sign Out</button>\n  )\n}\n\nfunction ChatMessage(props) {\n  const { text, uid, photoURL, name = 'Anonim' } = props.message;\n  const messageStyle = uid === auth.currentUser.uid ? 'sent' : 'received';\n  return (\n    <div className={`message ${messageStyle}`}>\n      <img src={photoURL} />\n      <div className=\"msgRow\">\n        <p className=\"name\">{name}</p>\n        <p className=\"msg\">{text}</p>\n      </div>\n    </div>)\n}\n\n\n\nfunction ChatRoom(props) {\n\n  const scroll = useRef();\n  const [unknown, setUnknown] = useState('');\n\n  img.child('user.png').getDownloadURL().then(url => {\n    setUnknown(url)\n  });\n\n  const messageRef = firestore.collection('messages');\n  const query = messageRef.orderBy('createdAt').limit(30);\n\n  const [messages] = useCollectionData(query, { idField: 'id' });\n  const [formValue, setFormValue] = useState(``);\n  const [update, setUpdate] = useState(true);\n \n  const sendMessage = async (e) => {\n    e.preventDefault();\n    const name = firebase.auth().currentUser.displayName;\n    const { uid, photoURL } = auth.currentUser;\n    if (formValue !== '') await messageRef.add({\n      text: formValue,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      uid,\n      photoURL: photoURL !== null ? photoURL : unknown,\n      name\n    })\n\n    setFormValue('');\n    scroll.current.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  return (\n    <> \n    {update ? <Nickname setUpdate={setUpdate} user={props.user} /> : null}\n      <section>\n        <div className='messageSection'>\n          {messages === undefined ? <Preloader /> : messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\n          <div ref={scroll}></div>\n        </div>\n\n        <form onSubmit={sendMessage} className='form'>\n          <textarea value={formValue} onChange={(e) => setFormValue(e.target.value)} />\n          <button type='submit'>Send</button>\n        </form>\n\n\n      </section>\n    </>\n  )\n}\n\n\n//main App\nfunction App() {\n  const [user, loading, error] = useAuthState(auth);\n  return (\n    <div className=\"App\">\n      <header>\n        <div className=\"title\">\n          <p>Simple Chat</p>\n        </div>\n        {user ? <SignOut /> : null}\n      </header>\n      <div className=\"container\">\n        <main>\n          {loading ? <Preloader /> : user === null ? <SignIn /> : <ChatRoom user={user} />}\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}